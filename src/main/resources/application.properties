# Server Configuration
# Lokal development: 8081 (Jenkins port çakışmasını önlemek için)
# Docker container: Environment variable ile 8080'e override edilir
server.port=8081
spring.application.name=banking-system

# Database Configuration (SQLite)
spring.datasource.url=jdbc:sqlite:banking.db
spring.datasource.driver-class-name=org.sqlite.JDBC
# SQLite kullanıcı adı ve şifre gerektirmez

# JPA Configuration
# ddl-auto=none because Flyway manages schema migrations
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.properties.hibernate.format_sql=true

# SQLite ID Generation Fix
# SQLite JDBC driver doesn't support GeneratedKeys ResultSet properly
# Using AUTO strategy which will use TABLE-based generation for SQLite
spring.jpa.properties.hibernate.id.new_generator_mappings=true
spring.jpa.properties.hibernate.use_sql_comments=true
# Force Hibernate to use TABLE strategy for ID generation (avoids getGeneratedKeys issue)
spring.jpa.properties.hibernate.id.optimizer.pooled.preferred=pooled-lo

# Flyway Configuration - Enable for proper schema management
spring.flyway.enabled=true
spring.flyway.mixed=true
spring.flyway.locations=classpath:db/migration
# Baseline existing database (if tables exist but no flyway_schema_history)
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0

# JWT Configuration
jwt.secret=mySecretKeyForJWTTokenGenerationInBankingSystem2024
jwt.expiration=86400000

# Logging
logging.level.com.banking=DEBUG
logging.level.org.springframework.web=INFO

